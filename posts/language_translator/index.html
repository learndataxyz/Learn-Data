<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.29">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Adejumo Ridwan Suleiman">

<title>How to Build a Language Translator Application with Strapi, Streamlit, and Hugging Face Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="index_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-0815c480559380816a4d1ea211a47e91.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent quarto-light">

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">How to Build a Language Translator Application with Strapi, Streamlit, and Hugging Face Models</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">api</div>
                <div class="quarto-category">data science</div>
                <div class="quarto-category">machine learning</div>
                <div class="quarto-category">programming</div>
                <div class="quarto-category">python</div>
                <div class="quarto-category">streamlit</div>
                <div class="quarto-category">strapi</div>
                <div class="quarto-category">headless cms</div>
                <div class="quarto-category">hugging face</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Adejumo Ridwan Suleiman </p>
            </div>
    </div>
      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content quarto-banner-title-block" id="quarto-document-content">
<!-- Meta Pixel Code -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1777048436181438');
fbq('track', 'PageView');
</script>
<img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1777048436181438&amp;ev=PageView&amp;noscript=1">





<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/LearnData_Branding_(5).png" class="preview-image img-fluid"></p>
<p>If you‚Äôre building a cool side project or an MVP, you must store user and application content. This article will teach you about Strapi, a headless CMS you can use as your application backend. You will build a language translator application using Streamlit and a language translation model from Hugging Face that allows users to translate text written in any language to English, using Strapi as a back-end to store user inputs and outputs.</p>
<section id="benefits-of-a-language-translator-application" class="level3">
<h3 class="anchored" data-anchor-id="benefits-of-a-language-translator-application">Benefits of a Language Translator Application</h3>
<p>A language translator application is handy, especially when you come across texts online that you need help understanding because you are unfamiliar with the language. It can also serve as an educational tool, improving your understanding of foreign languages by learning through provided translations. Here is a demo of the language translator application you will build in this tutorial.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/upload_b32d.gif" class="img-fluid"></p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/upload_.gif" class="img-fluid"></p>
</section>
<section id="prerequisites" class="level2">
<h2 class="anchored" data-anchor-id="prerequisites">Prerequisites</h2>
<p>Before starting, ensure you have;</p>
<ul>
<li>Installed <a href="https://www.python.org/downloads/">Python 3.9+</a> or above.</li>
<li>Installed <a href="https://nodejs.org/en/learn/getting-started/how-to-install-nodejs">Node.js</a></li>
<li>Installed <a href="https://nodejs.org/en/learn/getting-started/an-introduction-to-the-npm-package-manager#introduction-to-npm">npm</a></li>
<li>Set up a <a href="https://huggingface.co/">Hugging Face</a> account.</li>
<li>Set up a <a href="https://cloud.strapi.io/login">Strapi</a> account.</li>
<li>Set up a <a href="https://share.streamlit.io/">Streamlit Cloud</a> account.</li>
<li>Set up a <a href="https://github.com/">Github Account</a>.</li>
</ul>
</section>
<section id="set-up-the-project-directory" class="level2">
<h2 class="anchored" data-anchor-id="set-up-the-project-directory">Set up the Project Directory</h2>
<ol type="1">
<li><p>On your terminal, create a new project <code>language_translator</code>.</p>
<pre><code>$ mkdir language_translator</code></pre></li>
<li><p>Inside the project directory, create a Python <a href="https://www.notion.so/Language_Translator-3ba29b2dbeab41fea3b705b64e4fea05?pvs=21">virtual environment</a>. This environment maintains the library versions used in your code, ensuring your code is reproducible every time it runs.</p>
<pre><code>$ python -m venv venv</code></pre>
<p>The first <code>venv</code> command creates a virtual environment, while the second <code>venv</code> specifies the name of your virtual environment, which you can give any name you like. After running the above command, a <code>venv</code> folder should be created in your project directory.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image.png" class="img-fluid"></p></li>
<li><p>Run the following code to activate the virtual environment and start working on it.</p>
<pre><code>$ ./venv/Scripts/Activate</code></pre>
<p>Upon activation, you should see the name of your virtual environment in green, signifying that you are already in a virtual environment.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%201.png" class="img-fluid"></p></li>
<li><p>Inside the project directory, create a <code>requirements.txt</code> file</p>
<pre><code>nano requirements.txt</code></pre></li>
<li><p>Copy and paste the following Python Libraries into the <code>requirements.txt</code> file.</p>
<pre><code>streamlit
python-dotenv
requests</code></pre>
<ul>
<li><a href="https://streamlit.io/"><code>streamlit</code></a> is a Python UI library for building interactive web applications.</li>
<li><a href="https://pypi.org/project/python-dotenv/"><code>python-dotenv</code></a> is a Python library for working with environment variables.</li>
<li><code>requests</code> is an HTTP client library that you can use to make requests from an API.</li>
</ul></li>
<li><p>Install the above Python libraries using the following command</p>
<pre><code>$ pip install -r requirements.txt</code></pre></li>
<li><p>Create a <code>.env</code> file to store environment variables such as API keys and secrets.</p>
<pre><code>$ touch .env</code></pre></li>
<li><p>Inside your <code>language_translator</code> directory, create a folder <code>frontend</code> for the application frontend.</p>
<pre><code>$ mkdir frontend</code></pre></li>
<li><p>In the folder <code>frontend</code>, create the files <code>main.py</code> and <code>utilis.py</code></p>
<pre><code>touch main.py utilis.py</code></pre></li>
<li><p>In the project folder, create a <code>.gitignore</code> file, to ignore the <code>venv</code> and <code>.env</code> path when pushing to git.</p>
<pre><code>/venv
.env</code></pre></li>
</ol>
</section>
<section id="build-the-front-end" class="level2">
<h2 class="anchored" data-anchor-id="build-the-front-end">Build the Front-end</h2>
<p>The front end is where users will interact with the application. You will build it using Streamlit and translate user inputs using a language translator model from Hugging Face.</p>
<section id="select-a-model-from-hugging-face" class="level3">
<h3 class="anchored" data-anchor-id="select-a-model-from-hugging-face">Select a Model from Hugging Face</h3>
<ol type="1">
<li><p>Log in to Hugging Face, go to the search bar, and search for <a href="https://huggingface.co/facebook/mbart-large-50-many-to-one-mmt">facebook/mbart-large-50-many-to-one-mmt</a>. This is the model you will use to allow users to give input in any language and translate it into English.</p></li>
<li><p>Click on <strong>Deploy</strong>, then <strong>Inference API</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%202.png" class="img-fluid"></p></li>
<li><p>Copy the code displayed to you and paste it into <code>utilis.py</code>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%203.png" class="img-fluid"></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>API_URL <span class="op">=</span> <span class="st">"&lt;https://api-inference.huggingface.co/models/facebook/mbart-large-50-many-to-one-mmt&gt;"</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {<span class="st">"Authorization"</span>: <span class="st">"Bearer &lt;your-api-token&gt;"</span>}</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> query(payload):</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.post(API_URL, headers<span class="op">=</span>headers, json<span class="op">=</span>payload)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> response.json()</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>output <span class="op">=</span> query({</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"inputs"</span>: <span class="st">"The answer to the universe is"</span>,</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>API_URL</code> is the variable storing the link to the model API.</li>
<li><code>headers</code> is the variable storing your Hugging Face authorization token to use the API.</li>
<li>The <code>query</code> function makes a POST request to the model API to translate a given input text and return the JSON output.</li>
</ul></li>
<li><p>Copy your <code>API-TOKEN</code>, go to the <code>.env</code> file, and create the variable. <code>HUGGING_FACE_TOKEN</code>.</p>
<pre><code>HUGGING_FACE_TOKEN="&lt;your-api-token&gt;"</code></pre></li>
<li><p>Go back to the <code>utilis.py</code> file, copy and paste the following code to create a function of <strong>Step 3</strong> that accepts a text in any language and translates it to English.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> json</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dotenv <span class="im">import</span> load_dotenv</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>load_dotenv(<span class="st">".env"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>HUGGING_FACE_TOKEN <span class="op">=</span> os.getenv(<span class="st">"HUGGING_FACE_TOKEN"</span>)</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>API_URL <span class="op">=</span> <span class="st">"&lt;https://api-inference.huggingface.co/models/facebook/mbart-large-50-many-to-one-mmt&gt;"</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>headers <span class="op">=</span> {<span class="st">"Authorization"</span>: <span class="ss">f"Bearer </span><span class="sc">{</span>HUGGING_FACE_TOKEN<span class="sc">}</span><span class="ss">"</span>}</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> translate(inputs):</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> query(payload):</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> requests.post(API_URL, headers<span class="op">=</span>headers, json<span class="op">=</span>payload)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> response.json()</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> query(</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"inputs"</span>: inputs,</span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> output[<span class="dv">0</span>][<span class="st">"generated_text"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>load_dotenv(".env")</code> loads your <code>.env</code> file, making it visible for <code>os.getenv()</code> to get the environment variable specified.</li>
<li>The <code>translate()</code> function takes input text, while the <code>query</code> function processes it and returns it in JSON. Finally, the <code>translate()</code> function extracts the translated text.</li>
<li>Here is an example of how the <code>translate</code> function works. Copy and run the text below.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> <span class="st">"‡§∏‡§Ç‡§Ø‡•Å‡§ï‡•ç‡§§ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§ï‡•á ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§ï‡§æ ‡§ï‡§π‡§®‡§æ ‡§π‡•à ‡§ï‡§ø ‡§∏‡•Ä‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§∏‡•à‡§®‡•ç‡§Ø ‡§∏‡§Æ‡§æ‡§ß‡§æ‡§® ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à"</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>translate(text)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;&gt;</span>Output: <span class="st">'The head of the UN says there is no military solution in Syria'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="build-the-user-interface-with-streamlit" class="level3">
<h3 class="anchored" data-anchor-id="build-the-user-interface-with-streamlit">Build the User Interface with Streamlit</h3>
<ol type="1">
<li><p>Inside your <code>main.py</code> file, import the <code>translate</code> function and streamlit.</p>
<pre><code>from utilis import translate
import streamlit as st</code></pre></li>
<li><p>Create a title and input area.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>st.title(<span class="st">"Language Translator to English"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>input_text <span class="op">=</span> st.text_area(<span class="st">"Enter the text you want to translate:"</span>, height<span class="op">=</span><span class="dv">150</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>st.title</code> sets a text in bold and large size.</li>
<li><code>st.text_area</code> is a multi-line text input widget that allows users to give input.</li>
</ul></li>
<li><p>Run the code below on your terminal to launch the Streamlit application.</p>
<pre><code>streamlit run main.py</code></pre>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%204.png" class="img-fluid"></p></li>
<li><p>Create a button to process any input given in the text area.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> st.button(<span class="st">"Translate"</span>):</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> input_text:</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        translated_text <span class="op">=</span> translate(input_text)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>        st.write(<span class="st">"## Translated Text"</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>        st.write(translated_text)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>        st.warning(<span class="st">"Please enter some text to translate."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p><code>st.button</code> creates a button to translate a text.</p></li>
<li><p>I<code>f</code> there is an <code>input text</code>, the <code>translation</code> function is called on the <code>input_text</code> and saved as <code>translated_text</code>; otherwise, a warning is given.</p></li>
<li><p>Save your file and go to the Streamlit application to see the changes.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%205.png" class="img-fluid"></p></li>
</ul></li>
<li><p>Paste the Hindi text given earlier into the text area and click on translate.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%206.png" class="img-fluid"></p>
<p>What is left is to set up a back-end on Strapi to save any translated text.</p></li>
</ol>
</section>
</section>
<section id="build-the-back-end" class="level2">
<h2 class="anchored" data-anchor-id="build-the-back-end">Build the Back-end</h2>
<section id="set-up-strapi" class="level3">
<h3 class="anchored" data-anchor-id="set-up-strapi">Set up Strapi</h3>
<ol type="1">
<li><p>In your main directory <code>language_translator</code>, create a new Strapi project called <code>backend</code>.</p>
<pre><code>npx create-strapi-app@latest backend --quickstart</code></pre>
<p>This will install Strapi and an SQLite database in your project directory.</p></li>
<li><p>Run the following code in your terminal to open the admin panel at <a href="http://localhost:1337/admin" class="uri">http://localhost:1337/admin</a>. Fill in your credentials, <strong>Sign up,</strong> and <strong>Log in</strong>.</p>
<pre><code>npm run develop</code></pre>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%207.png" class="img-fluid"></p></li>
<li><p>Go to <strong>Content Type Builder</strong>, click <strong>Create a new collection</strong>, create a new collection <strong>Translation</strong>, then <strong>Continue</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%208.png" class="img-fluid"></p></li>
<li><p>Create <code>input_text</code> and <code>translated_text</code> as <strong>Text fields</strong> while <code>translation_date</code> is a <strong>Date field</strong> and <strong>Save</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%209.png" class="img-fluid"></p></li>
<li><p>Go to <strong>Settings</strong> on your admin menu, under <strong>User &amp; Permissions Plugin</strong>, click on <strong>Roles,</strong> and edit the <strong>Public</strong> role.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2010.png" class="img-fluid"></p></li>
<li><p>In the <strong>Public</strong> role, set the <strong>Translation</strong> permission to <strong>create</strong> and <strong>find</strong>, then <strong>Save</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2011.png" class="img-fluid"></p></li>
</ol>
</section>
<section id="connect-strapi-with-streamlit" class="level3">
<h3 class="anchored" data-anchor-id="connect-strapi-with-streamlit">Connect Strapi with Streamlit</h3>
<ol type="1">
<li><p>Copy and paste the following code to create a function <code>save_translation</code> that saves both the <code>input_text</code> and <code>output_text</code> to Strapi.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>STRAPI_URL <span class="op">=</span> <span class="st">"&lt;http://localhost:1337/api&gt;"</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> save_translation(input_text, translated_text):</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    data <span class="op">=</span> {</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"data"</span>: {</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"input_text"</span>: input_text,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"translated_text"</span>: translated_text,</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"translation_date"</span>: datetime.now().isoformat(),</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.post(</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="ss">f"</span><span class="sc">{</span>STRAPI_URL<span class="sc">}</span><span class="ss">/translations"</span>,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>        headers<span class="op">=</span>{<span class="st">"Content-Type"</span>: <span class="st">"application/json"</span>},</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>        data<span class="op">=</span>json.dumps(data),</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> response.json()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><code>STRAPI_URL</code> is the link to the Strapi backend API. You will use this to send and receive data from Strapi.</li>
<li>The <code>save_translation()</code> function receives the user <code>input_text</code>, <code>translated_text</code>, and <code>translation_date</code> as JSON in the variable data and sends it for storage in the Strapi back-end.</li>
<li><code>datetime.now().isoformat()</code> saves the current date and time an <code>input_text</code> was translated as <code>"translation_date"</code> into data.</li>
<li>The <code>response</code> variable makes a <code>POST</code> request to save the values into the <code>Translation</code> collection in Strapi.</li>
</ul></li>
<li><p>Go back to <code>main.py</code> and update the code just before the end of the inner <code>if</code> condition. This will ensure that anytime a user clicks the Translate button, the text displays, and the input and output text are saved to Strapi through the <code>save_translation()</code> function.</p></li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> st.button(<span class="st">"Translate"</span>):</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> input_text:</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">#code to display text after input is given</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="co">#....</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">#code to update</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">#--------------</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>        save_translation(input_text, translated_text)</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        st.warning(<span class="st">"Please enter some text to translate."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li><p>Try to translate a text, and go back to your dashboard under the <strong>Content Manager</strong> menu to see the saved text.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2012.png" class="img-fluid"></p></li>
<li><p>To output the history from latest to oldest, add the <code>get_history()</code> function to <code>utilis.py</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_history():</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> requests.get(<span class="ss">f"</span><span class="sc">{</span>STRAPI_URL<span class="sc">}</span><span class="ss">/translations"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> response.status_code <span class="op">==</span> <span class="dv">200</span>:</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> response.json()</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> []</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>This function gets all the items stored in the <strong>Translation</strong> collection using a <code>GET</code> request and saves it in the variable <code>response</code> as JSON.</li>
</ul></li>
<li><p>Update <code>main.py</code> with the following code to create a History button where users can view previous translations.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> st.button(<span class="st">"History"</span>):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    history <span class="op">=</span> get_history()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> history:</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> item <span class="kw">in</span> <span class="bu">reversed</span>(history[<span class="st">"data"</span>]):</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            st.text(</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                <span class="ss">f"Date: </span><span class="sc">{</span>item[<span class="st">'attributes'</span>][<span class="st">'translation_date'</span>]<span class="sc">}</span><span class="ch">\\</span><span class="ss">nInput: </span><span class="sc">{</span>item[<span class="st">'attributes'</span>][<span class="st">'input_text'</span>]<span class="sc">}</span><span class="ch">\\</span><span class="ss">nTranslated: </span><span class="sc">{</span>item[<span class="st">'attributes'</span>][<span class="st">'translated_text'</span>]<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        st.write(<span class="st">"No history found."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>If the <strong>History</strong> button is clicked, the <code>get_history()</code> is called, fetching and displaying all items in the <strong>Translation</strong> collection.</li>
<li>The <code>reversed()</code> function loops the list <code>history[data]</code> in a reverse order to display recently added text first.</li>
<li>If no <code>history</code> is found, the application returns a warning.</li>
<li>If you click the <code>history</code> button, you should have something like this.</li>
</ul>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2013.png" class="img-fluid"></p></li>
</ol>
</section>
</section>
<section id="deployment" class="level2">
<h2 class="anchored" data-anchor-id="deployment">Deployment</h2>
<p>The application consists of two components: the back end and the front end. There are various ways to deploy these components, but for this tutorial, you will use Strapi Cloud to deploy the back end and Streamlit Cloud to deploy the front end.</p>
<p>Strapi Cloud deployment is free for 14 days, but the Streamlit Cloud is completely free. Before proceeding, ensure you have already versioned your project on GitHub.</p>
<section id="deploy-the-backend-on-strapi-cloud" class="level3">
<h3 class="anchored" data-anchor-id="deploy-the-backend-on-strapi-cloud">Deploy the Backend on Strapi Cloud</h3>
<ol type="1">
<li><p>Go to <strong>Deploy</strong> on your admin dashboard menu, and click <strong>Deploy to Strapi Cloud</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2014.png" class="img-fluid"></p></li>
<li><p>Sign in to Strapi Cloud.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2015.png" class="img-fluid"></p></li>
<li><p>Click on <strong>Create Project</strong> to create a new project.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2016.png" class="img-fluid"></p></li>
<li><p>Select the <strong>Free trial</strong> and click on <strong>GitHub</strong> to permit Strapi to authorize your <strong>GitHub</strong> account.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2017.png" class="img-fluid"></p></li>
<li><p>After completing the authorization steps, you should have something like this. Select the account you want Strapi to access and the project repository.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2018.png" class="img-fluid"></p></li>
<li><p>Give the application a display name, and leave other options as the default.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2019.png" class="img-fluid"></p></li>
<li><p>Under <strong>Show Advanced Settings</strong>, type the backend directory, which is <code>/backend</code>, leave other options as default, and click on <strong>Create Project</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2020.png" class="img-fluid"></p></li>
<li><p>You can see the application build and deploy logs displayed while the application is being built.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2021.png" class="img-fluid"></p></li>
<li><p>Click on the <strong>Visit app</strong> to open up the live admin panel.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2022.png" class="img-fluid"></p></li>
<li><p>Like before, when you open the admin panel locally, fill in your credentials and log in.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2023.png" class="img-fluid"></p></li>
<li><p>Since the backend is deployed, change the <code>STRAPI_URL</code> variable in <code>utilis.py</code> to the live URL. Copy the URL of the live dashboard, excluding the part <code>/admin</code>, and include <code>/</code>API at the end.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>STRAPI_URL<span class="op">=</span><span class="st">"&lt;your-strapi-api-url&gt;/api"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Ensure you cross-check your settings to see if all the roles are set. If not, you can set them back using <strong>Step 6</strong> in the <strong>Set up Strapi</strong> section.</p></li>
</ol>
<p>That‚Äôs it, you now have your back-end live, let‚Äôs deploy the frontend and the back-end.</p>
</section>
<section id="deploy-the-frontend-on-streamlit-cloud" class="level3">
<h3 class="anchored" data-anchor-id="deploy-the-frontend-on-streamlit-cloud">Deploy the Frontend on Streamlit Cloud</h3>
<ol type="1">
<li><p>Log in to Streamlit Cloud and <a href="https://docs.streamlit.io/deploy/streamlit-community-cloud/get-started/connect-your-github-account">authorize</a> Streamlit to access your GitHub account.</p></li>
<li><p>Click on <strong>Create app</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2024.png" class="img-fluid"></p></li>
<li><p>Please complete the form by providing the project repository and the path of the streamlet application, which is <code>/frontend/main.py</code>. If you have authorized Streamlit to access your GitHub repositories, it will list all the repositories in your GitHub account.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2025.png" class="img-fluid"></p></li>
<li><p>Click on <strong>Advanced Settings</strong>, type in your <code>HUGGING_FACE_TOKEN</code> as it is in your <code>.env</code> file, and <strong>Save</strong>.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2026.png" class="img-fluid"></p></li>
<li><p>Click on <strong>Deploy!</strong> to start building the application. This is going to take a while.</p></li>
<li><p>Now, you have successfully deployed the Streamlit application.</p>
<p><img src="Language_Translator%203ba29b2dbeab41fea3b705b64e4fea05/image%2027.png" class="img-fluid"></p></li>
</ol>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>In this article, you have learned how to use a model from Hugging Face to build a Streamlit application and store your user inputs and outputs on a Strapi backend. You also learned how to deploy the back-end and front-end components on Strapi and Streamlit Cloud. Strapi has a fun and active <a href="http://discord.com/invite/strapi">Discord community</a> to help answer your questions whenever you feel stuck.</p>
<p>Here is the <a href="https://github.com/adejumoridwan/Language-Translator">GitHub repository</a> for the language translator application. You can further extend the application by:</p>
<ul>
<li>Add <a href="https://blog.streamlit.io/streamlit-authenticator-part-1-adding-an-authentication-component-to-your-app/">authorization</a> to your Streamlit front end and set various user <a href="https://strapi.io/blog/a-beginners-guide-to-authentication-and-authorization-in-strapi">roles and permission</a>s for your Strapi backend.</li>
<li>Exploring various language models on Hugging Face, such as English-to-many language translators or audio translators.</li>
</ul>
</section>
<section id="recommended-reads" class="level2">
<h2 class="anchored" data-anchor-id="recommended-reads">Recommended Reads</h2>
<ul>
<li><a href="https://www.udemy.com/course/ml-model-deployment-with-fastapi-and-streamlit/?referralCode=F5A92CE034F17099C9F0">ML Model Deployment with FastAPI and Streamlit</a></li>
<li><a href="https://docs.strapi.io/dev-docs/integrations/python">Using Python with Strapi</a></li>
<li><a href="https://docs.strapi.io/dev-docs/deployment">Deploying to Strapi Cloud</a></li>
<li><a href="https://docs.strapi.io/dev-docs/admin-panel-customization">Admin Panel Customization</a></li>
<li><a href="https://strapi.io/blog/analyzing-data-from-a-strapi-api-with-python">Analyzing data from a Strapi API with Python</a></li>
<li><a href="https://docs.streamlit.io/deploy/streamlit-community-cloud/deploy-your-app">Deploying to Streamlit Cloud</a></li>
</ul>
<section id="need-help-with-data-lets-make-it-simple." class="level3">
<h3 class="anchored" data-anchor-id="need-help-with-data-lets-make-it-simple."><strong>Need Help with Data? Let‚Äôs Make It Simple.</strong></h3>
<p><em>At <strong>LearnData.xyz</strong>, we‚Äôre here to help you solve tough data challenges and make sense of your numbers. Whether you need custom data science solutions or hands-on training to upskill your team, we‚Äôve got your back.</em></p>
<p><em>üìß Shoot us an email at <strong>admin@learndata.xyz</strong>‚Äîlet‚Äôs chat about how we can help you make smarter decisions with your data.</em></p>
</section>
</section>
<section id="your-next-breakthrough-could-be-one-email-away.-lets-make-it-happen" class="level2">
<h2 class="anchored" data-anchor-id="your-next-breakthrough-could-be-one-email-away.-lets-make-it-happen">Your next breakthrough could be one email away. Let‚Äôs make it happen!</h2>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<script src="https://giscus.app/client.js" data-repo="adejumoridwan/comments" data-repo-id="R_kgDOMp4Jsg" data-category="General" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<script type="application/javascript">
  const giscusIframeObserver = new MutationObserver(function (mutations) {
    mutations.forEach(function (mutation) {
      mutation.addedNodes.forEach(function (addedNode) {
        if (addedNode.matches && addedNode.matches('div.giscus')) {
          const giscusIframe = addedNode.querySelector('iframe.giscus-frame');
          if(giscusIframe) {
            giscusIframe.addEventListener("load", function() {
              window.setTimeout(() => {
                toggleGiscusIfUsed(hasAlternateSentinel(), authorPrefersDark);
              }, 100);
            });
            giscusIframeObserver.disconnect();
          }
        }
      });
    });
  });
  giscusIframeObserver.observe(document.body, { childList: true, subtree: true });
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->




</body></html>